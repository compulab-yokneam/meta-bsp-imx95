From b4e8c38aea4beb16034a310ff6453bb64de188fe Mon Sep 17 00:00:00 2001
From: yaakov <yaakov.entin@compulab.co.il>
Date: Wed, 6 Nov 2024 10:48:27 +0200
Subject: [PATCH] compulab: dts: ucm-imx95: enable USB

---
 arch/arm64/boot/dts/compulab/ucm-imx95.dts | 58 +---------------------
 1 file changed, 1 insertion(+), 57 deletions(-)

diff --git a/arch/arm64/boot/dts/compulab/ucm-imx95.dts b/arch/arm64/boot/dts/compulab/ucm-imx95.dts
index e5e67d93b395..77d7e739de63 100644
--- a/arch/arm64/boot/dts/compulab/ucm-imx95.dts
+++ b/arch/arm64/boot/dts/compulab/ucm-imx95.dts
@@ -469,45 +469,6 @@ i2c7_pcal6524: i2c7-gpio@22 {
 		interrupt-parent = <&gpio5>;
 		interrupts = <16 IRQ_TYPE_LEVEL_LOW>;
 	};
-
-	ptn5110: tcpc@50 {
-		compatible = "nxp,ptn5110";
-		reg = <0x50>;
-		interrupt-parent = <&gpio5>;
-		interrupts = <14 IRQ_TYPE_LEVEL_LOW>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&pinctrl_ptn5110>;
-
-		port {
-			typec_dr_sw: endpoint {
-				remote-endpoint = <&usb3_drd_sw>;
-			};
-		};
-
-		typec_con: connector {
-			compatible = "usb-c-connector";
-			label = "USB-C";
-			power-role = "dual";
-			data-role = "dual";
-			try-power-role = "sink";
-			source-pdos = <PDO_FIXED(5000, 3000, PDO_FIXED_USB_COMM)>;
-			sink-pdos = <PDO_FIXED(5000, 0, PDO_FIXED_USB_COMM)>;
-			op-sink-microwatt = <0>;
-			self-powered;
-
-			ports {
-				#address-cells = <1>;
-				#size-cells = <0>;
-
-				port@1 {
-					reg = <1>;
-					typec_con_ss: endpoint {
-						remote-endpoint = <&usb3_data_ss>;
-					};
-				};
-			};
-		};
-	};
 };
 
 &lpuart1 {
@@ -625,7 +586,6 @@ ethphy1: ethernet-phy@4 {
 
 &usb2 {
 	dr_mode = "host";
-	vbus-supply = <&reg_usb_vbus>;
 	disable-over-current;
 	status = "okay";
 };
@@ -747,29 +707,13 @@ &usb3 {
 
 &usb3_phy {
 	status = "okay";
-	port {
-		usb3_data_ss: endpoint {
-			remote-endpoint = <&typec_con_ss>;
-		};
-	};
 };
 
 &usb3_dwc3 {
-	dr_mode = "otg";
-	hnp-disable;
+	dr_mode = "host";
 	srp-disable;
 	adp-disable;
-	usb-role-switch;
-	role-switch-default-mode = "none";
-	snps,dis-u1-entry-quirk;
-	snps,dis-u2-entry-quirk;
 	status = "okay";
-
-	port {
-		usb3_drd_sw: endpoint {
-			remote-endpoint = <&typec_dr_sw>;
-		};
-	};
 };
 
 &scmi_misc {
